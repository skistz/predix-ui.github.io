<link rel="import" href="../../bower_components/polymer/polymer.html" />
<link rel="import" href="../../css/predix-ui-styles.html"/>
<link rel="import" href="../../bower_components/px-theme/px-theme-styles.html">
<link rel="import" href="../../bower_components/px-accordion/px-accordion.html">

<dom-module id="view-develop-internationalization">
  <template>
    <!-- Include the style modules in body to ensure they come after their imported code (which will be inlined at the end of <head> by vulcanize in production) -->
    <style include="predix-ui-styles" is="custom-style"></style>
    <style include="px-theme-styles" is="custom-style"></style>

    <template is="dom-bind">
      <section class="main u-mb++ vis__main">
        <h5>Last Updated August 16, 2017</h5>
        <h2 class="selected">Internationalization</h2>

          <p>Most Predix Design System components can be localized, using one or more of the three following methods: localizing text, localizing date and time; and localizing number formatting. The Predix Design System does not provide translations for strings, only the hooks for you to provide your own translated resources.</p>

          <h4 class="u-pt u-mb++">Localizing component strings</h4>
          <p>In order to localize strings in Predix components you will need to pass down two properties to the components: <code class="code code--inline">language</code> and <code class="code code--inline">resources</code>.</p>

          <p>The <code class="code code--inline">resources</code>property should be an object in which each key is a language code that will match the <code class="code code--inline">language</code> property. The value for each language key is a nested object, in which each key is the string to be translated and each value is the translated string.</p>

          <p>Example <code class="code code--inline">resources</code> object:</p>
          <figure class="code vis__code-snippet">
            <code>
              {<br>
              &nbsp;'en': {<br>
              &nbsp;&nbsp;'Apply': 'Apply',<br>
              &nbsp;&nbsp;'Cancel': 'Cancel'<br>
              &nbsp;},<br>
              &nbsp;'fr: {<br>
              &nbsp;&nbsp;'Apply': 'Appliquer',<br>
              &nbsp;&nbsp;'Cancel': 'Annuler'<br>
              &nbsp;}<br>
              }
            </code>
          </figure>
          <br>


          <p>The <code class="code code--inline">resources</code> property only needs to hold the language you currently use, but can include as many languages as you want. A specific component's <code class="code code--inline">resources</code> property needs to hold all its strings <strong>as well as all the strings of any internal subcomponents it uses</strong>. Determining what subcomponents a component uses, and what strings it should have, can be tricky. We recommend that you create one big <code class="code code--inline">resources</code> object containing
          every string needed for all of the Predix components your application is using, then pass this object to every component that needs localization. </p>

          <p>Alternatively, your application could have one JSON file per language, load this file in one place, and then pass it down to every component. The components then only need to have their <code class="code code--inline">language</code> property changed to match the one in <code class="code code--inline">resources</code>.</p>

          <p>The list of strings required per component can be found <a href="https://www.predix-ui.com/#/guides/localize-strings/" target="_top">here</a> for the time being, while we devise a better mechanism to help people build the list of strings they need to localize in their application.</p>


          <h4 class="u-pt u-mb++">Localizing d3.js</h4>

          <p>Some of the Predix components use d3.js to handle date and number formatting, in particular the data visualization components. The Predix components load their own version of d3.js, so that an application can also load any version of d3.js without version conflicts.</p>

          <p>The d3.js library supports two different types of localization: date/time format and number format. The Predix version of d3.js can therefore be localized through two different convenience functions: <code class="code code--inline">Px.d3.changeNumberLocale()</code> and <code class="code code--inline">Px.d3.changeTimeLocale()</code>.</p>

          <h3 class="u-mt++ u-pt++">Load a supported locale</h3>

          <p><strong>Important note: in order to load the date/time and number locales, you need to make sure your build includes the <code class="code code--inline">timeLocale</code> and <code class="code code--inline">numberLocale</code> folders from px-d3-imports.</strong> By default, the locales will be searched for in the <code class="code code--inline">px-d3-imports</code> folder, but the paths can be overridden through the <code class="code code--inline">Px.d3.timeLocaleURL</code> and <code class="code code--inline">Px.d3.numberLocaleURL</code> properties.</p>

          <p>To load a locale, just pass one of the following supported locales and an optional callback to the appropriate convenience function (which will be called after the locale has been successfully loaded).</p>

          <p>Example:</p>
          <figure class="code vis__code-snippet">
            <code>
              Px.d3.changeTimeLocale('ca-ES', function() {<br>
              &nbsp;console.log('d3 time locale changed!');<br>
              });<br>
              <br>
              Px.d3.changeNumberLocale('ar-PS', function() {<br>
              &nbsp;console.log('d3 number locale changed!');<br>
              });
            </code>
          </figure>

          <br>
          <px-accordion icons='{"more":"px-utl:chevron-right","less":"px-utl:chevron"}' header-value="Supported d3 date/time locales">
            <ul>
              <li>ca-ES</li>
              <li>cs-CZ</li>
              <li>de-CH</li>
              <li>de-DE</li>
              <li>en-CA</li>
              <li>en-GB</li>
              <li>en-US</li>
              <li>es-ES</li>
              <li>es-MX</li>
              <li>fi-FI</li>
              <li>fr-CA</li>
              <li>fr-FR</li>
              <li>he-IL</li>
              <li>hu-HU</li>
              <li>it-IT</li>
              <li>ja-JP</li>
              <li>ko-KR</li>
              <li>mk-MK</li>
              <li>nl-NL</li>
              <li>pl-PL</li>
              <li>pt-BR</li>
              <li>ru-RU</li>
              <li>sv-SE</li>
              <li>uk-UA</li>
              <li>zh-CN</li>
            </ul>
          </px-accordion>

          <br>
          <px-accordion icons='{"more":"px-utl:chevron-right","less":"px-utl:chevron"}' header-value="Supported d3 number locales">
            <ul>
              <li>ar-00</li>
              <li>ar-AE</li>
              <li>ar-BH</li>
              <li>ar-DJ</li>
              <li>ar-DZ</li>
              <li>ar-EG</li>
              <li>ar-EH</li>
              <li>ar-ER</li>
              <li>ar-IL</li>
              <li>ar-IQ</li>
              <li>ar-JO</li>
              <li>ar-KM</li>
              <li>ar-KW</li>
              <li>ar-LB</li>
              <li>ar-LY</li>
              <li>ar-MA</li>
              <li>ar-MR</li>
              <li>ar-OM</li>
              <li>ar-PS</li>
              <li>ar-QA</li>
              <li>ar-SA</li>
              <li>ar-SD</li>
              <li>ar-SO</li>
              <li>ar-SS</li>
              <li>ar-SY</li>
              <li>ar-TD</li>
              <li>ar-TN</li>
              <li>ar-YE</li>
              <li>ca-ES</li>
              <li>cs-CZ</li>
              <li>de-CH</li>
              <li>de-DE</li>
              <li>en-CA</li>
              <li>en-GB</li>
              <li>en-IN</li>
              <li>en-US</li>
              <li>es-ES</li>
              <li>es-MX</li>
              <li>fi-FI</li>
              <li>fr-CA</li>
              <li>fr-FR</li>
              <li>he-IL</li>
              <li>hu-HU</li>
              <li>it-IT</li>
              <li>ja-JP</li>
              <li>ko-KR</li>
              <li>mk-MK</li>
              <li>nl-NL</li>
              <li>pl-PL</li>
              <li>pt-BR</li>
              <li>ru-RU</li>
              <li>sv-SE</li>
              <li>uk-UA</li>
              <li>zh-CN</li>
            </ul>
          </px-accordion>

          <br>
          <p>Because the locale needs to be fetched from a JSON file asynchronously, you can use the callback in <code class="code code--inline">Px.d3.changeTimeLocale/Px.d3.changeNumberLocale</code> in order to perform actions after the locale has been loaded (such as updating the <code class="code code--inline">language</code> and <code class="code code--inline">resources</code> of the PX components).</p>

          <h3 class="u-mt++ u-pt++">Load a custom locale</h3>


          <p>Loading a custom locale is relatively straightforward, but requires manually loading/generating a config object as defined by d3.js <a href="https://github.com/d3/d3-time-format/blob/master/README.md#timeFormatDefaultLocale">here</a> for date/time and <a href="https://github.com/d3/d3-format/blob/master/README.md#formatDefaultLocale">here</a> for numbers.</p>

          <p>Example:</p>
          <figure class="code vis__code-snippet">
            <code>
              Px.d3.changeTimeLocale(null, null, yourConfigObject);<br>
              Px.d3.changeNumberLocale(null, null, yourConfigObject);
            </code>
          </figure>
          <br>

          <p>In this scenario, the d3.js locale change is synchronous.</p>


          <h4 class="u-pt u-mb++">Localizing moment.js</h4>


          <p>Some of the Predix Design System components use moment.js to handle date and time, in particular the datetime and data visualization components. The Predix components load their own version of moment.js so that an application can also load any version of moment.js without version conflicts.</p>

          <p>The Predix Design System version of moment.js can be localized through the convenience function <code class="code code--inline">Px.moment.changeLocale()</code>. This function can either load a locale out of the box, or any custom locale can be used.</p>

          <p>Please note that when changing the moment locale, previously created moment objects are not affected, and might need to be recreated/updated. Predix components depending on moment.js will recreate their own moment objects after their <code class="code code--inline">language</code> property changes; so when localizing components, the moment locale will need to be changed *before* changing the <code class="code code--inline">language</code> property of the component.</p>

          <h3 class="u-mt++ u-pt++">Load a supported locale</h3>

          <p><strong>Important note: in order to be able to load these locales, you need to make sure your build includes the <code class="code code--inline">momentLocale</code> folder from px-moment-imports</strong>. By default the locale will be searched for in the <code class="code code--inline">px-datetime-common/momentLocale</code> folder, but the path can be overridden through the <code class="code code--inline">Px.moment.localeURL</code> property.</p>

          <p>When loading a supported locale, just pass one of the following locales and an optional callback (which will be called after the locale has been successfully loaded).</p>

          <p>Example:</p>
          <figure class="code vis__code-snippet">
            <code>
              Px.moment.changeLocale('fr', function() {<br>
              &nbsp;console.log('moment locale changed!');<br>
              });
            </code>
          </figure>
          <br>
          <px-accordion icons='{"more":"px-utl:chevron-right","less":"px-utl:chevron"}' header-value="List of out-of-the-box moment locales">
            <ul>
              <li>af</li>
              <li>ar-dz</li>
              <li>ar-kw</li>
              <li>ar-ly</li>
              <li>ar-ma</li>
              <li>ar-sa</li>
              <li>ar-tn</li>
              <li>ar</li>
              <li>az</li>
              <li>be</li>
              <li>bg</li>
              <li>bn</li>
              <li>bo</li>
              <li>br</li>
              <li>bs</li>
              <li>ca</li>
              <li>cs</li>
              <li>cv</li>
              <li>cy</li>
              <li>da</li>
              <li>de-at</li>
              <li>de-ch</li>
              <li>de</li>
              <li>dv</li>
              <li>el</li>
              <li>en-au</li>
              <li>en-ca</li>
              <li>en-gb</li>
              <li>en-ie</li>
              <li>en-nz</li>
              <li>eo</li>
              <li>es-do</li>
              <li>es</li>
              <li>et</li>
              <li>eu</li>
              <li>fa</li>
              <li>fi</li>
              <li>fo</li>
              <li>fr-ca</li>
              <li>fr-ch</li>
              <li>fr</li>
              <li>fy</li>
              <li>gd</li>
              <li>gl</li>
              <li>gom-latn</li>
              <li>he</li>
              <li>hi</li>
              <li>hr</li>
              <li>hu</li>
              <li>hy-am</li>
              <li>id</li>
              <li>is</li>
              <li>it</li>
              <li>ja</li>
              <li>jv</li>
              <li>ka</li>
              <li>kk</li>
              <li>km</li>
              <li>kn</li>
              <li>ko</li>
              <li>ky</li>
              <li>lb</li>
              <li>lo</li>
              <li>lt</li>
              <li>lv</li>
              <li>me</li>
              <li>mi</li>
              <li>mk</li>
              <li>ml</li>
              <li>mr</li>
              <li>ms-my</li>
              <li>ms</li>
              <li>my</li>
              <li>nb</li>
              <li>ne</li>
              <li>nl-be</li>
              <li>nl</li>
              <li>nn</li>
              <li>pa-in</li>
              <li>pl</li>
              <li>pt-br</li>
              <li>pt</li>
              <li>ro</li>
              <li>ru</li>
              <li>sd</li>
              <li>se</li>
              <li>si</li>
              <li>sk</li>
              <li>sl</li>
              <li>sq</li>
              <li>sr-cyrl</li>
              <li>sr</li>
              <li>ss</li>
              <li>sv</li>
              <li>sw</li>
              <li>ta</li>
              <li>te</li>
              <li>tet</li>
              <li>th</li>
              <li>tl-ph</li>
              <li>tlh</li>
              <li>tr</li>
              <li>tzl</li>
              <li>tzm-latn</li>
              <li>tzm</li>
              <li>uk</li>
              <li>ur</li>
              <li>uz-latn</li>
              <li>uz</li>
              <li>vi</li>
              <li>x-pseudo</li>
              <li>yo</li>
              <li>zh-cn</li>
              <li>zh-hk</li>
              <li>zh-tw</li>
            </ul>
          </px-accordion>
          <br>


          <p>Because the locale needs to be fetched from a script, this process is asynchronous; you can use the callback in <code class="code code--inline">Px.moment.changeLocale</code> in order to perform actions after the locale has been loaded (such as updating the <code class="code code--inline">language</code> and <code class="code code--inline">resources</code> of the Predix components).</p>

          <h3 class="u-mt++ u-pt++">Load a custom locale</h3>

          <p>Loading a custom locale is relatively straightforward, but requires manually loading/generating a config object as defined by moment.js <a href="http://momentjs.com/docs/#/customization/">here</a>.</p>

          <p>Example:</p>
          <figure class="code vis__code-snippet">
            <code>
              Px.moment.changeLocale(null, null, yourConfigObject);
            </code>
          </figure>

          <p>In this scenario, the moment.js locale change is synchronous. In order for a component to pick up a moment locale change, its <code class="code code--inline">language</code> property <strong>needs</strong> to be updated, even if it doesn't have new resources to load.</p>

      </section>
    </template>

    <!-- Footer -->
    <px-demo-footer></px-demo-footer>

  </template>
  <script>
    Polymer({
      is: 'view-develop-internationalization'
    });
  </script>
</dom-module>
