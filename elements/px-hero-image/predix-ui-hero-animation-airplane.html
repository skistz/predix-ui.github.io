<link rel="import" href="../../bower_components/polymer/polymer.html" />
<link rel="import" href="../../css/predix-ui-hero-animation-icons-styles.html">

<dom-module id="predix-ui-hero-animation-airplane">
  <template>
    <style include="predix-ui-hero-animation-icons-styles" is="custom-style">
      .fly {
        animation: fly 1s linear;
      }
      @keyframes fly {
        from {
          transform:translateX(0);
          opacity: 1;
        }
        50% {
          opacity: 1;
        }
        to {
          transform:translateX(320px);
          opacity: 0;
        }
      }

      .hide {
        fill: var(--animation-banner-corner-color, #D8E0E5);
      }
    </style>

    <div id="wrapper">
      <svg
        id="base"
        xmlns="http://www.w3.org/2000/svg"
        width$="500"
        height$="[[size]]"
        viewBox="0 0 320 32">

        <g id="plane">
          <path class="icons notfilled" stroke-linejoin="round" d="M10.9 16L8.1 27h3.7l7.1-11m-8-4L8.1 5h3.7l5.6 7" />
          <path class="icons notfilled" d="M8.5 18H5.2a3.89 3.89 0 0 1-3.7-4V8h1.9l1.9 4h21.5a3.89 3.89 0 0 1 3.7 4v2H19.7" stroke-linejoin="round"/>
          <path class="icons notfilled" d="M30.4 15.1h-4.5a1.35 1.35 0 0 1-1.3-1.4v-1.9" stroke-miterlimit="10"/>
        </g>

        <path class="hide" d="M0,0L51,0L25,32h-15L-10,0Z" />
      </svg>
    </div>
  </template>
</dom-module>

<script>
  Polymer({
    is: 'predix-ui-hero-animation-airplane',
    properties: {
      size: {
        type: Number,
        value: 32
      }
    },

    attached: function() {
      this._randomize(5000);
    },

    _randomize: function(tout) {
      setTimeout(function() {
        var t = Math.random() * (20000 - 5000) + 5000;
        this.play();
        this._randomize(t);
      }.bind(this), tout);
    },

    play: function() {
      this.$.plane.classList.add("fly");
      setTimeout(function() {
        this.$.plane.classList.remove("fly");
      }.bind(this), 1100);
    }
  });
</script>
